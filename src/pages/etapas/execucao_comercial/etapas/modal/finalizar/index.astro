---

---

<style is:inline>
    .modal.modalBig {
        --bs-modal-width: 800px !important;
    }
</style>

<div class="modal modalBig fade" id="finalizarModal" tabindex="-1" aria-labelledby="finalizarModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">

            <div class="modal-header">
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>

            <form id="form-finalizar" action="/etapas/execucao_comercial/etapas/">
                <div class="modal-body">
                    <h4 class="text-center text-orange">
                        <i class="bi bi-file-earmark-check"></i> VocÃª tem certeza que deseja finalizar consultoria!
                    </h4>
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Voltar</button>
                    <button type="submit" class="btn btn-primary btn-loader" data-btn-loader="button">
                        <span>Finalizar</span>
                        <span data-btn-loader="icon" class="icon">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid" width="16" height="16" style="shape-rendering: auto; display: block; background: transparent;" xmlns:xlink="http://www.w3.org/1999/xlink">
                                <g>
                                    <circle stroke-dasharray="164.93361431346415 56.97787143782138" r="35" stroke-width="10" stroke="#ffffff" fill="none" cy="50" cx="50">
                                        <animateTransform
                                            keyTimes="0;1" values="0 50 50;360 50 50" dur="1s" repeatCount="indefinite" type="rotate" attributeName="transform">
                                        </animateTransform>
                                    </circle>
                                <g>
                            </svg>
                        </span>
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

<div class="alert alert-success alert-dismissible py-2 fade" role="alert" id="myAlert" style="display: none">
    <div class="d-flex align-items-center gap-2">
        <i class="bi bi-check2-circle fs-4"></i>
        <strong>Consultoria Finalizada com Sucesso!</strong>
    </div>

    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
</div>

<style>
    .btn-loader{
        display: flex;
        align-items: center;
        gap: 1;
    }
    .btn-loader .icon{
        display: none;
    }
</style>

<script is:inline type="module">
    $('#form-finalizar').on('submit', function(event){
        event.preventDefault()

        const btnLoader     = $('[data-btn-loader="button"]')
        const btnLoaderIcon = $('[data-btn-loader="icon"]')

        btnLoader.prop("disabled",true)
        btnLoaderIcon.show()

        setTimeout(() => {
            btnLoader.prop("disabled",false)
            btnLoaderIcon.hide()

            const modal = bootstrap.Modal.getInstance(finalizarModal);
            modal.hide();
        }, 3000);
    })
</script>
